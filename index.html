<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Equistasi – Clinica</title>
  <style>
    /* VARIABILI COLORE (Tema Scuro Professionale) */
    :root {
      --bg: #0b0f14; 
      --panel: #111821; 
      --txt: #e7eef8; 
      --muted: #a8b3c3;
      --accent: #4da3ff; 
      --border: rgba(255,255,255,0.1);
      --card-bg: rgba(255,255,255,0.03);
    }

    * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    html, body { height: 100%; margin: 0; background: var(--bg); color: var(--txt); overflow: hidden; }
    
    /* LAYOUT PRINCIPALE */
    .app { display: grid; grid-template-columns: 420px 1fr; height: 100vh; }
    
    /* SIDEBAR SINISTRA */
    .sidebar { 
      background: var(--panel); 
      padding: 25px; 
      border-right: 1px solid var(--border); 
      overflow-y: auto; 
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* VIEWER 3D */
    .viewer { position: relative; background: #000; display: flex; flex-direction: column; }
    iframe { width: 100%; height: 100%; border: 0; }

    /* COMPONENTI SCHEDA */
    .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 15px; }
    .label { font-size: 11px; color: var(--muted); text-transform: uppercase; margin-bottom: 6px; font-weight: 700; letter-spacing: 0.5px; }
    input, select, textarea { 
      width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border); 
      background: rgba(0,0,0,0.3); color: #fff; font-size: 14px; margin-bottom: 12px;
    }

    /* LOGO E OVERLAY */
    .logo-overlay { position: absolute; top: 20px; right: 25px; z-index: 10; background: white; padding: 8px 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
    .logo-overlay img { height: 35px; display: block; }
    .cover-logo { position: absolute; bottom: 0; left: 0; width: 200px; height: 50px; background: #000; z-index: 5; pointer-events: none; }

    /* BOTTONI */
    .btn-row { display: flex; gap: 10px; margin-bottom: 10px; }
    .btn { 
      cursor: pointer; border: 1px solid var(--accent); border-radius: 6px; 
      padding: 10px 15px; font-weight: bold; font-size: 12px; transition: 0.3s;
    }
    .btn-lang { background: transparent; color: var(--accent); flex: 1; }
    .btn-lang:hover { background: var(--accent); color: white; }
    .btn-print { background: var(--accent); color: white; width: 100%; padding: 15px; font-size: 14px; margin-top: 10px; }
    .btn-print:hover { filter: brightness(1.1); }

    /* REGOLE DI STAMPA PDF (Risolve image_c31b5f.jpg) */
    @media print {
      body { background: white !important; color: black !important; overflow: visible !important; }
      .app { display: block !important; height: auto !important; }
      .sidebar { width: 100% !important; border: none !important; padding: 0 !important; background: white !important; }
      .viewer { 
        width: 100% !important; height: 850px !important; 
        page-break-before: always; position: relative !important; display: block !important; 
      }
      iframe { height: 100% !important; border: 1px solid #eee !important; }
      .btn, .btn-print, .btn-row, .cover-logo, select#mapSelector { display: none !important; }
      .card { border: 1px solid #ddd !important; background: none !important; page-break-inside: avoid; margin-bottom: 20px; }
      input, select, textarea { border: none !important; background: none !important; color: black !important; padding: 0 !important; margin-bottom: 10px; }
      .label { color: #555 !important; }
      .logo-overlay { position: relative !important; top: 0 !important; right: 0 !important; margin-bottom: 30px; text-align: right; box-shadow: none; }
    }
  </style>
</head>
<body>

<div class="app">
  <aside class="sidebar">
    <div class="btn-row">
      <button class="btn btn-lang" onclick="changeLang('it')">ITALIANO</button>
      <button class="btn btn-lang" onclick="changeLang('en')">ENGLISH</button>
    </div>

    <h2 id="t-title" style="margin: 5px 0 15px 0; font-size: 1.4em;">Equistasi – Scheda Clinica</h2>
    
    <div class="card">
      <div class="label" id="t-patient">Paziente (ID o Nome)</div>
      <input type="text" placeholder="Es: Milena Baroni">
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
        <div>
          <div class="label" id="t-date">Data Visita</div>
          <input type="date" value="2026-01-07">
        </div>
        <div>
          <div class="label" id="t-side">Lato Trattamento</div>
          <select><option>Sinistro</option><option>Destro</option><option>Bilaterale</option></select>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="label" id="t-map">Visualizzazione 3D</div>
      <select id="mapSelector" onchange="switchMap(this.value)">
        <option value="2b5y">Sistema Muscolare (Target)</option>
        <option value="4VpE" selected>Mappa Dermatomeri (Corpo Intero)</option>
        <option value="2Yv8">Muscoli della Corsa (Arto Inf.)</option>
      </select>
      
      <div class="label" id="t-muscles">Muscoli Target (Principali)</div>
      <input type="text" placeholder="Es: Trapezio, SCM...">
      
      <div class="label" id="t-innerv">Livello Innervazione (Radice)</div>
      <input type="text" placeholder="Es: C2-C3, L5-S1">
    </div>

    <div class="card">
      <div class="label" id="t-notes">Note Manuali / Trigger Points</div>
      <textarea rows="3" placeholder="Descrivi i punti di repere..."></textarea>
      
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
        <div>
          <div class="label" id="t-dev">Dispositivi</div>
          <select><option>1</option><option selected>2</option><option>3</option></select>
        </div>
        <div>
          <div class="label" id="t-dur">Durata (min)</div>
          <input type="number" value="2">
        </div>
      </div>
    </div>

    <button class="btn btn-print" onclick="window.print()" id="t-print">GENERA PDF SCHEDA</button>
  </aside>

  <main class="viewer">
    <div class="logo-overlay"><img src="equistasi-logo.png" alt="Logo"></div>
    <div class="cover-logo"></div>
    <iframe id="bioframe" src="https://human.biodigital.com/widget/?be=4VpE&background.colors=0,0,0,1,0,0,0,1&ui-info=true&ui-fullscreen=true&ui-dissect=true&ui-zoom=true&ui-tools-display=primary&uaid=3Yfre&lang=it"></iframe>
  </main>
</div>

<script>
  // SISTEMA DI TRADUZIONE INTEGRATO (Rimuove loghi Google)
  const translations = {
    it: { title: "Equistasi – Scheda Clinica", patient: "Paziente (ID o Nome)", date: "Data Visita", side: "Lato Trattamento", map: "Visualizzazione 3D", muscles: "Muscoli Target (Principali)", innerv: "Livello Innervazione (Radice)", notes: "Note Manuali / Trigger Points", dev: "Dispositivi", dur: "Durata (min)", print: "GENERA PDF SCHEDA" },
    en: { title: "Equistasi – Clinical Sheet", patient: "Patient (ID or Name)", date: "Visit Date", side: "Treatment Side", map: "3D Visualization", muscles: "Target Muscles (Primary)", innerv: "Innervation Level (Root)", notes: "Manual Notes / Trigger Points", dev: "Devices", dur: "Duration (min)", print: "GENERA PDF SHEET" }
  };

  function changeLang(lang) {
    const t = translations[lang];
    document.getElementById('t-title').innerText = t.title;
    document.getElementById('t-patient').innerText = t.patient;
    document.getElementById('t-date').innerText = t.date;
    document.getElementById('t-side').innerText = t.side;
    document.getElementById('t-map').innerText = t.map;
    document.getElementById('t-muscles').innerText = t.muscles;
    document.getElementById('t-innerv').innerText = t.innerv;
    document.getElementById('t-notes').innerText = t.notes;
    document.getElementById('t-dev').innerText = t.dev;
    document.getElementById('t-dur').innerText = t.dur;
    document.getElementById('t-print').innerText = t.print;
    
    // Aggiorna lingua dell'iframe 3D
    const frame = document.getElementById('bioframe');
    const url = new URL(frame.src);
    url.searchParams.set('lang', lang);
    frame.src = url.toString();
  }

  // FUNZIONE CAMBIO MAPPA
  function switchMap(modelId) {
    const frame = document.getElementById('bioframe');
    const baseUrl = "https://human.biodigital.com/widget/?be=";
    const settings = "&background.colors=0,0,0,1,0,0,0,1&ui-info=true&ui-fullscreen=true&ui-dissect=true&ui-zoom=true&ui-tools-display=primary&uaid=3Yfre&lang=it";
    frame.src = baseUrl + modelId + settings;
  }
</script>

</body>
</html>
